import fs from 'fs';
import path from 'path';

const oSpreadsheetTemplatePath = path.join('node_modules', '@odoo/o-spreadsheet', 'dist', 'o_spreadsheet.xml');
const oSpreadsheetTemplate = fs.readFileSync(oSpreadsheetTemplatePath, 'utf8');

const content = `// This file is automatically generated
// Please do not edit this file.

export default /* xml */ \`
${oSpreadsheetTemplate.replace(/<!--[\s\S]*?-->\n/g, '')}\`;`;

fs.mkdirSync(path.join('src', 'spreadsheet'), { recursive: true });
fs.writeFileSync(path.join('src', 'spreadsheet', 'templates.ts'), content);